---
import Dialog from "../components/Dialog.astro";
import ProgressBar from "../components/ProgressBar.astro";
import FloatingButton from "../components/FloatingButton.astro";

import data from "../assets/formatted_simpsons_data.json";
import rawdata from "../assets/simpsons_data.json";

import { Image } from "astro:assets";
import jesus from "../assets/jesus.gif";

for (const ep of data.seasons) {
	ep["seen"] = false;
}
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<link
			rel="stylesheet"
			href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"
		/>
		<title>Simpsons checklist</title>
	</head>

	<body class="bg-[#ffc107]">
		<Dialog />
		<div class="p-10 lg:20 w-screen">
			<div class="flex justify-between">
				<div class="mb-10 flex justify-start">
					<div class="mr-2">
						<Image src={jesus} alt="Cheesus" class="max-w-16" />
					</div>
					<div>
						<h1 class="text-xl lg:text-7xl mb-2 font-serif">
							Simpson checklist
						</h1>
						<h5>
							Take note of The Simpsons episodes you've watched.
						</h5>
					</div>
				</div>
			</div>

			<ProgressBar />

			<div class="justify-start">
				{
					data.seasons.map((season) => (
						<>
							<div>
								<h3 class=" font-bold ">
									Season {season[0].season}
								</h3>
							</div>
							<div class="mb-6 mt-2 flex-wrap flex justify-start text-sm">
								{season.map((episode) => (
									<div class="has-tooltip flex justify-center">
										<span class="tooltip rounded shadow-lg p-1 bg-gray-700 text-white px-3 text-xs -translate-y-full max-w-36 -mt-1 text-center">
											<span class=" font-bold">
												{episode.title} <br />
											</span>
											{episode.description}
										</span>

										<button class="bg-orange-400 w-10 h-10 rounded-sm border-solid border m-1 border-gray-900 hover:bg-orange-500">
											<a href="">{episode.episode}</a>{" "}
										</button>
									</div>
								))}
							</div>
						</>
					))
				}
			</div>

			<FloatingButton episodes={rawdata.episodes} />
		</div>
	</body>
</html>

<style is:global>
	@font-face {
		font-family: "SimpsonsFont";
		src: url("/fonts/simpsonsfont.woff") format("woff");
		font-weight: normal;
		font-style: normal;
		font-display: swap;
	}
	.tooltip {
		@apply invisible absolute;
	}

	.has-tooltip:hover .tooltip {
		@apply visible z-50;
	}
</style>
